{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Loader/Loader.module.css","components/Modal/Modal.module.css","components/App/App.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","services/pixabayApi.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Loader/Loader.js","components/Button/Button.js","components/Modal/Modal.js","components/App/App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","searchQuery","currentPage","axios","get","then","response","data","hits","Searchbar","state","query","hendleChange","e","setState","currentTarget","value","toLowerCase","hendleSubmit","preventDefault","trim","props","onSubmit","toast","error","className","s","searchbar","searchForm","this","type","searchFormButton","searchFormButtonLabel","searchFormInput","placeholder","onChange","Component","ImageGalleryItem","id","src","alt","largeImageURL","onClick","imageGalleryItem","imageGalleryItemImage","data-source","ImageGallery","imageGallery","map","webformatURL","tags","App","loader","color","height","width","React","Button","button","modalRoot","document","querySelector","Modal","hendleKeyDown","code","onClose","hendleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","overlay","modal","url","isLoading","showModal","largeImage","onChangeQuery","fetchHits","options","pixabayApi","prevState","scrollTo","top","documentElement","scrollHeight","behavior","catch","finally","detectModalImage","console","log","toggleModal","prevProps","shouldRenderLoadMoreButton","length","app","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"wIACAA,EAAOC,QAAU,CAAC,iBAAmB,2CAA2C,sBAAwB,kD,mBCAxGD,EAAOC,QAAU,CAAC,OAAS,yB,mBCA3BD,EAAOC,QAAU,CAAC,QAAU,uBAAuB,MAAQ,uB,mBCA3DD,EAAOC,QAAU,CAAC,IAAM,mB,mBCAxBD,EAAOC,QAAU,CAAC,aAAe,qC,mBCAjCD,EAAOC,QAAU,CAAC,OAAS,yB,oMCSZ,EARG,SAAC,GAA2C,IAAD,IAAxCC,mBAAwC,MAA1B,GAA0B,MAAtBC,mBAAsB,MAAR,EAAQ,EAC3D,OAAOC,IACJC,IADI,qCAE2BH,EAF3B,iBAE+CC,EAF/C,gGAIJG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,KAAKC,S,uBCFfC,E,4MACnBC,MAAQ,CACNC,MAAO,I,EAGTC,aAAe,SAAAC,GACb,EAAKC,SAAS,CAAEH,MAAOE,EAAEE,cAAcC,MAAMC,iB,EAG/CC,aAAe,SAAAL,GACbA,EAAEM,iBAE8B,KAA5B,EAAKT,MAAMC,MAAMS,QAKrB,EAAKC,MAAMC,SAAS,EAAKZ,MAAMC,OAE/B,EAAKG,SAAS,CAAEH,MAAO,MANrBY,IAAMC,MAAM,2H,4CAShB,WACE,OACE,wBAAQC,UAAWC,IAAEC,UAArB,SACE,uBAAMF,UAAWC,IAAEE,WAAYN,SAAUO,KAAKX,aAA9C,UACE,wBAAQY,KAAK,SAASL,UAAWC,IAAEK,iBAAnC,SACE,sBAAMN,UAAWC,IAAEM,sBAAnB,sBAGF,uBACEP,UAAWC,IAAEO,gBACbH,KAAK,OACLI,YAAY,2BACZlB,MAAOa,KAAKnB,MAAMC,MAClBwB,SAAUN,KAAKjB,wB,GAnCYwB,a,kCCWxBC,EAdU,SAAC,GAA8C,IAA5CC,EAA2C,EAA3CA,GAAIC,EAAuC,EAAvCA,IAAKC,EAAkC,EAAlCA,IAAKC,EAA6B,EAA7BA,cAAeC,EAAc,EAAdA,QACvD,OACE,oBAAajB,UAAWC,IAAEiB,iBAA1B,SACE,qBACED,QAASA,EACTH,IAAKA,EACLC,IAAKA,EACLf,UAAWC,IAAEkB,sBACbC,cAAaJ,KANRH,ICCE,SAASQ,EAAT,GAA0C,IAAlBtC,EAAiB,EAAjBA,KAAMkC,EAAW,EAAXA,QAC3C,OACE,oBAAIjB,UAAWC,IAAEqB,aAAjB,SACGvC,EAAKwC,KAAI,YAAgD,IAA7CV,EAA4C,EAA5CA,GAAIW,EAAwC,EAAxCA,aAAcR,EAA0B,EAA1BA,cAAeS,EAAW,EAAXA,KAC5C,OACE,cAAC,EAAD,CAEEX,IAAKU,EACLT,IAAKU,EACLT,cAAeA,EACfC,QAAS,kBAAMA,EAAQD,KAJlBH,Q,8CCNIa,E,4JACnB,WACE,OACE,qBAAK1B,UAAWC,IAAE0B,OAAlB,SACE,cAAC,IAAD,CACEtB,KAAK,eACLuB,MAAM,UACNC,OAAQ,GACRC,MAAO,GACP9B,UAAWC,IAAE0B,e,GATUI,IAAMpB,W,iBCUxBqB,EAZA,SAAC,GAAiB,IAAff,EAAc,EAAdA,QAChB,OACE,wBAAQjB,UAAWC,IAAEgC,OAAQ5B,KAAK,SAASY,QAASA,EAApD,wF,iBCAEiB,EAAYC,SAASC,cAAc,eACpBC,E,4MASnBC,cAAgB,SAAAlD,GACC,WAAXA,EAAEmD,MACJ,EAAK3C,MAAM4C,W,EAIfC,oBAAsB,SAAArD,GAChBA,EAAEE,gBAAkBF,EAAEsD,QACxB,EAAK9C,MAAM4C,W,uDAhBf,WACEG,OAAOC,iBAAiB,UAAWxC,KAAKkC,iB,kCAG1C,WACEK,OAAOE,oBAAoB,UAAWzC,KAAKkC,iB,oBAe7C,WACE,OAAOQ,uBACL,qBAAK9C,UAAWC,IAAE8C,QAAS9B,QAASb,KAAKqC,oBAAzC,SACE,qBAAKzC,UAAWC,IAAE+C,MAAlB,SACE,qBAAKlC,IAAKV,KAAKR,MAAMqD,IAAKlC,IAAI,SAGlCmB,O,GA5B6BvB,aCkGpBe,E,4MA3FbzC,MAAQ,CACNF,KAAM,GACNN,YAAa,EACbD,YAAa,GACb0E,WAAW,EACXnD,MAAO,KACPoD,WAAW,EACXC,WAAY,M,EASdC,cAAgB,SAAAnE,GACd,EAAKG,SAAS,CACZb,YAAaU,EACbT,YAAa,EACbM,KAAM,GACNgB,MAAO,Q,EAIXuD,UAAY,WAAO,IAAD,EAC4B,EAAKrE,MAAzCR,EADQ,EACRA,YAAaD,EADL,EACKA,YACf+E,GAFU,EACkBxD,MAClB,CACdvB,cACAC,gBAGF,EAAKY,SAAS,CAAE6D,WAAW,IAE3BM,EACaD,GACV3E,MAAK,SAAAG,GACJ,EAAKM,UAAS,SAAAoE,GAAS,MAAK,CAC1B1E,KAAK,GAAD,mBAAM0E,EAAU1E,MAAhB,YAAyBA,IAC7BN,YAAagF,EAAUhF,YAAc,MAGnB,IAAhBA,GACFkE,OAAOe,SAAS,CACdC,IAAKxB,SAASyB,gBAAgBC,aAC9BC,SAAU,cAIfC,OAAM,SAAAhE,GAAK,OAAI,EAAKV,SAAS,CAAEU,aAC/BiE,SAAQ,kBAAM,EAAK3E,SAAS,CAAE6D,WAAW,Q,EAG9Ce,iBAAmB,SAAAhB,GACjBiB,QAAQC,IAAIlB,GACZ,EAAK5D,SAAS,CAAE+D,WAAYH,IAC5B,EAAKmB,e,EAGPA,YAAc,WACZ,EAAK/E,UAAS,kBAAoB,CAChC8D,WADY,EAAGA,e,wDAlDnB,SAAmBkB,EAAWZ,GACxBA,EAAUjF,cAAgB4B,KAAKnB,MAAMT,aACvC4B,KAAKkD,c,oBAqDT,WAAU,IAAD,EACuClD,KAAKnB,MAA3CkE,EADD,EACCA,UAAWpE,EADZ,EACYA,KAAMmE,EADlB,EACkBA,UAAWnD,EAD7B,EAC6BA,MAC9BuE,EAA6BvF,EAAKwF,OAAS,IAAMrB,EAEvD,OACE,sBAAKlD,UAAWC,IAAEuE,IAAlB,UACGzE,GAAS,sEAEV,cAAC,EAAD,CAAWF,SAAUO,KAAKiD,gBAE1B,cAAChC,EAAD,CAActC,KAAMA,EAAMkC,QAASb,KAAK6D,mBAEvCf,GAAa,cAAC,EAAD,IAEboB,GAA8B,cAAC,EAAD,CAAQrD,QAASb,KAAKkD,YAEpDH,GACC,cAAC,EAAD,CAAOX,QAASpC,KAAKgE,YAAanB,IAAK7C,KAAKnB,MAAMmE,aAGpD,cAAC,IAAD,CAAgBqB,UAAW,a,GAtFjB9D,aCNlB+D,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFzC,SAAS0C,eAAe,U,kBCT1BvG,EAAOC,QAAU,CAAC,UAAY,6BAA6B,WAAa,8BAA8B,iBAAmB,oCAAoC,sBAAwB,yCAAyC,gBAAkB,mCAAmC,mBAAmB,uC","file":"static/js/main.eb9cac83.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__51Xys\",\"imageGalleryItemImage\":\"ImageGalleryItem_imageGalleryItemImage__gopoS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__33nRY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2Fmpa\",\"modal\":\"Modal_modal__39SB1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3uydg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__2ARL-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2HZ4R\"};","import axios from 'axios';\r\n\r\nconst fetchHits = ({ searchQuery = '', currentPage = 1 }) => {\r\n  return axios\r\n    .get(\r\n      `https://pixabay.com/api/?q=${searchQuery}&page=${currentPage}&key=19836909-16e58b6603fc5616f8f6edf37&image_type=photo&orientation=horizontal&per_page=12`,\r\n    )\r\n    .then(response => response.data.hits);\r\n};\r\n\r\nexport default { fetchHits };\r\n","import React, { Component } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Searchbar.module.css';\r\n\r\nexport default class Searchbar extends Component {\r\n  state = {\r\n    query: '',\r\n  };\r\n\r\n  hendleChange = e => {\r\n    this.setState({ query: e.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  hendleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    if (this.state.query.trim() === '') {\r\n      toast.error('Вы ввели пустой запрос!');\r\n      return;\r\n    }\r\n\r\n    this.props.onSubmit(this.state.query);\r\n\r\n    this.setState({ query: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.searchbar}>\r\n        <form className={s.searchForm} onSubmit={this.hendleSubmit}>\r\n          <button type=\"submit\" className={s.searchFormButton}>\r\n            <span className={s.searchFormButtonLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={s.searchFormInput}\r\n            type=\"text\"\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.query}\r\n            onChange={this.hendleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n","import s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ id, src, alt, largeImageURL, onClick }) => {\n  return (\n    <li key={id} className={s.imageGalleryItem}>\n      <img\n        onClick={onClick}\n        src={src}\n        alt={alt}\n        className={s.imageGalleryItemImage}\n        data-source={largeImageURL}\n      />\n    </li>\n  );\n};\n\nexport default ImageGalleryItem;\n","import PropTypes from 'prop-types';\r\nimport s from './ImageGallery.module.css';\r\n\r\nimport ImageGalleryItem from 'components/ImageGalleryItem';\r\n\r\nexport default function ImageGallery({ hits, onClick }) {\r\n  return (\r\n    <ul className={s.imageGallery}>\r\n      {hits.map(({ id, webformatURL, largeImageURL, tags }) => {\r\n        return (\r\n          <ImageGalleryItem\r\n            key={id}\r\n            src={webformatURL}\r\n            alt={tags}\r\n            largeImageURL={largeImageURL}\r\n            onClick={() => onClick(largeImageURL)}\r\n          />\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  hits: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n      webformatURL: PropTypes.string.isRequired,\r\n      largeImageURL: PropTypes.string.isRequired,\r\n      tags: PropTypes.string.isRequired,\r\n    }),\r\n  ),\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n","import React from 'react';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './Loader.module.css';\n\nexport default class App extends React.Component {\n  render() {\n    return (\n      <div className={s.loader}>\n        <Loader\n          type=\"BallTriangle\"\n          color=\"#00BFFF\"\n          height={80}\n          width={80}\n          className={s.loader}\n        />\n      </div>\n    );\n  }\n}\n","import PropTypes from 'prop-types';\r\nimport s from './Button.module.css';\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <button className={s.button} type=\"button\" onClick={onClick}>\r\n      Загрузить еще\r\n    </button>\r\n  );\r\n};\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.hendleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.hendleKeyDown);\r\n  }\r\n\r\n  hendleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  hendleBackdropClick = e => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={s.overlay} onClick={this.hendleBackdropClick}>\r\n        <div className={s.modal}>\r\n          <img src={this.props.url} alt=\"\" />\r\n        </div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  url: PropTypes.string.isRequired,\r\n};\r\n","import React, { Component } from 'react';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport s from './App.module.css';\r\n\r\nimport pixabayApi from 'services/pixabayApi';\r\nimport Searchbar from 'components/Searchbar';\r\nimport ImageGallery from 'components/ImageGallery';\r\nimport Loader from 'components/Loader';\r\nimport Button from 'components/Button';\r\nimport Modal from 'components/Modal';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    hits: [],\r\n    currentPage: 1,\r\n    searchQuery: '',\r\n    isLoading: false,\r\n    error: null,\r\n    showModal: false,\r\n    largeImage: null,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.searchQuery !== this.state.searchQuery) {\r\n      this.fetchHits();\r\n    }\r\n  }\r\n\r\n  onChangeQuery = query => {\r\n    this.setState({\r\n      searchQuery: query,\r\n      currentPage: 1,\r\n      hits: [],\r\n      error: null,\r\n    });\r\n  };\r\n\r\n  fetchHits = () => {\r\n    const { currentPage, searchQuery, error } = this.state;\r\n    const options = {\r\n      searchQuery,\r\n      currentPage,\r\n    };\r\n\r\n    this.setState({ isLoading: true });\r\n\r\n    pixabayApi\r\n      .fetchHits(options)\r\n      .then(hits => {\r\n        this.setState(prevState => ({\r\n          hits: [...prevState.hits, ...hits],\r\n          currentPage: prevState.currentPage + 1,\r\n        }));\r\n\r\n        if (currentPage !== 1) {\r\n          window.scrollTo({\r\n            top: document.documentElement.scrollHeight,\r\n            behavior: 'smooth',\r\n          });\r\n        }\r\n      })\r\n      .catch(error => this.setState({ error }))\r\n      .finally(() => this.setState({ isLoading: false }));\r\n  };\r\n\r\n  detectModalImage = url => {\r\n    console.log(url);\r\n    this.setState({ largeImage: url });\r\n    this.toggleModal();\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState(({ showModal }) => ({\r\n      showModal: !showModal,\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const { showModal, hits, isLoading, error } = this.state;\r\n    const shouldRenderLoadMoreButton = hits.length > 0 && !isLoading;\r\n\r\n    return (\r\n      <div className={s.app}>\r\n        {error && <h1>Ошибка</h1>}\r\n\r\n        <Searchbar onSubmit={this.onChangeQuery} />\r\n\r\n        <ImageGallery hits={hits} onClick={this.detectModalImage} />\r\n\r\n        {isLoading && <Loader />}\r\n\r\n        {shouldRenderLoadMoreButton && <Button onClick={this.fetchHits} />}\r\n\r\n        {showModal && (\r\n          <Modal onClose={this.toggleModal} url={this.state.largeImage} />\r\n        )}\r\n\r\n        <ToastContainer autoClose={3000} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from 'components/App/';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__2YI4w\",\"searchForm\":\"Searchbar_searchForm__2PHAa\",\"searchFormButton\":\"Searchbar_searchFormButton__3MKIw\",\"searchFormButtonLabel\":\"Searchbar_searchFormButtonLabel__3BeJt\",\"searchFormInput\":\"Searchbar_searchFormInput__20cI0\",\"searchForm-input\":\"Searchbar_searchForm-input__1RUwx\"};"],"sourceRoot":""}