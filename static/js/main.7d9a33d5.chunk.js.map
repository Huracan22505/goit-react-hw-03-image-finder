{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Loader/Loader.module.css","components/Modal/Modal.module.css","components/App/App.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","services/pixabayApi.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Loader/Loader.js","components/Button/Button.js","components/Modal/Modal.js","components/App/App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","searchQuery","currentPage","axios","get","then","response","data","hits","Searchbar","state","query","hendleChange","e","setState","currentTarget","value","toLowerCase","hendleSubmit","preventDefault","trim","props","onSubmit","toast","error","className","s","searchbar","searchForm","this","type","searchFormButton","searchFormButtonLabel","searchFormInput","placeholder","onChange","Component","ImageGalleryItem","imageGalleryItem","onClick","src","alt","imageGalleryItemImage","data-source","largeImageURL","id","ImageGallery","imageGallery","map","webformatURL","tags","App","loader","color","height","width","React","Button","button","modalRoot","document","querySelector","Modal","hendleKeyDown","code","onClose","hendleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","overlay","modal","url","isLoading","showModal","largeImage","onChangeQuery","fetchHits","options","pixabayApi","prevState","scrollTo","top","documentElement","scrollHeight","behavior","catch","finally","detectModalImage","console","log","toggleModal","prevProps","shouldRenderLoadMoreButton","length","app","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7d9a33d5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__51Xys\",\"imageGalleryItemImage\":\"ImageGalleryItem_imageGalleryItemImage__gopoS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__33nRY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2Fmpa\",\"modal\":\"Modal_modal__39SB1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3uydg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__2ARL-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2HZ4R\"};","import axios from 'axios';\n\nconst fetchHits = ({ searchQuery = '', currentPage = 1 }) => {\n  return axios\n    .get(\n      `https://pixabay.com/api/?q=${searchQuery}&page=${currentPage}&key=19836909-16e58b6603fc5616f8f6edf37&image_type=photo&orientation=horizontal&per_page=12`,\n    )\n    .then(response => response.data.hits);\n};\n\nexport default { fetchHits };\n","import React, { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport s from './Searchbar.module.css';\n\nexport default class Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  hendleChange = e => {\n    this.setState({ query: e.currentTarget.value.toLowerCase() });\n  };\n\n  hendleSubmit = e => {\n    e.preventDefault();\n\n    if (this.state.query.trim() === '') {\n      toast.error('Вы ввели пустой запрос!');\n      return;\n    }\n\n    this.props.onSubmit(this.state.query);\n\n    this.setState({ query: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.searchbar}>\n        <form className={s.searchForm} onSubmit={this.hendleSubmit}>\n          <button type=\"submit\" className={s.searchFormButton}>\n            <span className={s.searchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.searchFormInput}\n            type=\"text\"\n            placeholder=\"Search images and photos\"\n            value={this.state.query}\n            onChange={this.hendleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport s from './ImageGalleryItem.module.css';\n\nexport default class ImageGalleryItem extends Component {\n  render() {\n    return (\n      <li key={this.props.id} className={s.imageGalleryItem}>\n        <img\n          onClick={this.props.onClick}\n          src={this.props.src}\n          alt={this.props.alt}\n          className={s.imageGalleryItemImage}\n          data-source={this.props.largeImageURL}\n        />\n      </li>\n    );\n  }\n}\n","import PropTypes from 'prop-types';\nimport s from './ImageGallery.module.css';\n\nimport ImageGalleryItem from 'components/ImageGalleryItem';\n\nexport default function ImageGallery({ hits, onClick }) {\n  return (\n    <ul className={s.imageGallery}>\n      {hits.map(({ id, webformatURL, largeImageURL, tags }) => {\n        return (\n          <ImageGalleryItem\n            key={id}\n            src={webformatURL}\n            alt={tags}\n            largeImageURL={largeImageURL}\n            onClick={() => onClick(largeImageURL)}\n          />\n        );\n      })}\n    </ul>\n  );\n}\n\nImageGallery.propTypes = {\n  hits: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      largeImageURL: PropTypes.string.isRequired,\n      tags: PropTypes.string.isRequired,\n    }),\n  ),\n  onClick: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './Loader.module.css';\n\nexport default class App extends React.Component {\n  render() {\n    return (\n      <div className={s.loader}>\n        <Loader\n          type=\"BallTriangle\"\n          color=\"#00BFFF\"\n          height={80}\n          width={80}\n          className={s.loader}\n        />\n      </div>\n    );\n  }\n}\n","import PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nconst Button = ({ onClick }) => {\n  return (\n    <button className={s.button} type=\"button\" onClick={onClick}>\n      Загрузить еще\n    </button>\n  );\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.hendleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.hendleKeyDown);\n  }\n\n  hendleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  hendleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.overlay} onClick={this.hendleBackdropClick}>\n        <div className={s.modal}>\n          <img src={this.props.url} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  url: PropTypes.string.isRequired,\n};\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport s from './App.module.css';\n\nimport pixabayApi from 'services/pixabayApi';\nimport Searchbar from 'components/Searchbar';\nimport ImageGallery from 'components/ImageGallery';\nimport Loader from 'components/Loader';\nimport Button from 'components/Button';\nimport Modal from 'components/Modal';\n\nclass App extends Component {\n  state = {\n    hits: [],\n    currentPage: 1,\n    searchQuery: '',\n    isLoading: false,\n    error: null,\n    showModal: false,\n    largeImage: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchHits();\n    }\n  }\n\n  onChangeQuery = query => {\n    this.setState({\n      searchQuery: query,\n      currentPage: 1,\n      hits: [],\n      error: null,\n    });\n  };\n\n  fetchHits = () => {\n    const { currentPage, searchQuery, error } = this.state;\n    const options = {\n      searchQuery,\n      currentPage,\n    };\n\n    this.setState({ isLoading: true });\n\n    pixabayApi\n      .fetchHits(options)\n      .then(hits => {\n        this.setState(prevState => ({\n          hits: [...prevState.hits, ...hits],\n          currentPage: prevState.currentPage + 1,\n        }));\n\n        if (currentPage !== 1) {\n          window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: 'smooth',\n          });\n        }\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  detectModalImage = url => {\n    console.log(url);\n    this.setState({ largeImage: url });\n    this.toggleModal();\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  render() {\n    const { showModal, hits, isLoading, error } = this.state;\n    const shouldRenderLoadMoreButton = hits.length > 0 && !isLoading;\n\n    return (\n      <div className={s.app}>\n        {error && <h1>Ошибка</h1>}\n\n        <Searchbar onSubmit={this.onChangeQuery} />\n\n        <ImageGallery hits={hits} onClick={this.detectModalImage} />\n\n        {isLoading && <Loader />}\n\n        {shouldRenderLoadMoreButton && <Button onClick={this.fetchHits} />}\n\n        {showModal && (\n          <Modal onClose={this.toggleModal} url={this.state.largeImage} />\n        )}\n\n        <ToastContainer autoClose={3000} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from 'components/App/';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__2YI4w\",\"searchForm\":\"Searchbar_searchForm__2PHAa\",\"searchFormButton\":\"Searchbar_searchFormButton__3MKIw\",\"searchFormButtonLabel\":\"Searchbar_searchFormButtonLabel__3BeJt\",\"searchFormInput\":\"Searchbar_searchFormInput__20cI0\",\"searchForm-input\":\"Searchbar_searchForm-input__1RUwx\"};"],"sourceRoot":""}